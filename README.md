# Rontgen Roulette

## 目錄
1. [簡介](#簡介)
2. [安裝與依賴](#安裝與依賴)
3. [使用方法](#使用方法)
4. [資源說明](#資源說明)
5. [注意事項](#注意事項)
6. [隨機性說明](#隨機性說明)
7. [得獎名單輸出](#得獎名單輸出)

## 簡介
**Rontgen Roulette** 是一款基於 PySide2 以及 pygame 的桌面抽獎應用程式。您可以使用這款應用在各種活動或場合中進行抽獎，並設定自訂獎項、抽取人數等。抽獎的模式包含循序歷遍以及隨機歷遍，並具備動態動畫效果與音效效果，為活動增添更多樂趣。

## 安裝與依賴

在開始之前，請先確保您已經安裝了必要的 Python 版本（建議為 Python 3.7 或更高版本）以及下列的 Python 套件依賴：

1. **PySide2**: 用於建立圖形使用者介面（GUI）。
2. **pygame**: 用於處理聲音效果的播放。
3. **os、sys、math 等標準庫**。

### 安裝步驟
1. **複製專案到本地端**：
   ```sh
   git clone https://github.com/DZWDongZhuWorks/RontgenRoulette.git
   cd RontgenRoulette
   ```
2. **安裝依賴套件**：
   可以透過 `requirements.txt` 安裝所有需要的套件：
   ```sh
   pip install -r requirements.txt
   ```
3. **資源準備**：
   - 請確保 `resources` 資料夾內存在以下檔案：
     - `rolling_sound.wav`：滾動音效。
     - `winner_sound.mp3`：中獎音效。
     - `icon.png`：應用的圖示。
   - 需存在 `rewards` 資料夾，且資料夾內應包含一個或多個獎項清單（例如 `獎項.txt`）。

## 使用方法
1. 啟動程式：
   在終端機中運行以下指令來啟動應用程式：
   ```sh
   python RontgenRoulette.py
   ```
2. 使用者介面：
   - 主介面中有獎項選擇、抽獎人數、模式選擇等。
   - 點擊 `抽獎開始!` 按鈕後會開始轉盤動畫，最終決定中獎者。

3. 抽獎模式說明：
   - **循序歷遍**：從隨機位置開始依序選取員工參加抽獎。
   - **隨機歷遍**：每次隨機跳動。

4. 歷遍時間設定：
   使用者可以自行設定歷遍的最小和最大時間（以秒為單位），程式將根據設定進行抽獎。

## 資源說明
- 資源檔案需要放在 `resources` 資料夾內，包括：
  - **滾動音效** (`rolling_sound.wav`)：每次滾動員工名稱時播放。
  - **中獎音效** (`winner_sound.mp3`)：抽獎完成後中獎者公佈時播放。
  - **圖示** (`icon.png`)：應用程式的圖示。
- **獎項清單**：放在 `rewards` 資料夾內，需為 `.txt` 格式，每個檔案代表一個獎項，檔案中每一行對應一位參與者的名字。

## 注意事項
1. **資源缺失檢查**
   啟動程式前會自動檢查是否存在必要資源檔案，若有缺失將無法啟動程式，並彈出提示訊息列出缺少的資源。

2. **中獎者顯示與記錄**
   - 每次抽獎結束，中獎者將被高亮顯示，最終顯示於下方的中獎紀錄欄位。

3. **音效播放**
   若遇到音效撥放失敗的情況，請檢查音效檔案是否存在，並確保您的系統支持 `pygame` 的音效撥放功能。

## 得獎名單輸出
每次抽獎完成後，得獎者的名單會自動儲存到一個 CSV 檔案中，以便後續查看與記錄。

- CSV 檔案的命名方式為 `lottery_results_YYYYMMDD_HHMMSS.csv`，其中包含當前日期與時間，以確保檔案不會被覆蓋。
- 每次啟動程式後，在第一次進行抽獎時會自動創建該檔案，避免多次啟動產生空檔案。
- 每行的格式為：`員工姓名;獎項`，例如：
  ```
  張三;特等獎
  李四;二等獎
  ```
- 每次抽獎結束後，結果將會追加寫入到該檔案中，確保所有中獎記錄都能被保留。

## 隨機性與公平性

在 **Rontgen Roulette** 的抽獎過程中，為了確保隨機性與公平性，程式使用了 Python 的內建模組 `random` 提供的隨機數生成方法，特別是 `random.sample` 函數來選取參與者。

## 隨機性與公平性

在 **Rontgen Roulette** 的抽獎過程中，為了確保隨機性與公平性，程式使用了 Python 的內建模組 `random` 提供的隨機數生成方法，特別是 `random.sample` 函數來選取參與者。

### 隨機數產生邏輯

#### `random.sample` 是如何運作的？
- `random.sample(population, k)` 方法從指定的列表（`population`）中隨機選取 `k` 個不重複的元素。
- 該方法的隨機數生成基於 Mersenne Twister 演算法，這是一種高效能且品質極高的偽隨機數生成器，經廣泛測試被證明具有強大的隨機性。

#### Mersenne Twister 演算法簡介
Mersenne Twister（梅森旋轉演算法）是一個由松本眞和西村拓士於 1997 年開發的偽隨機數生成算法，基於有限二進制欄位上的矩陣線性遞歸。其名稱源自於其周期長度取自梅森質數的特性。Mersenne Twister 有兩個常用的變體：
- **MT19937**：產生 32 位元的偽隨機數，周期為 \(2^{19937}-1\)，具有極長的周期。
- **MT19937-64**：64 位元版本，適合更高精度的需求。

Mersenne Twister 具有以下特點：
- **極長的周期**：MT19937 的周期達到 \(2^{19937}-1\)，避免了短周期帶來的隨機性問題。
- **高維均勻分布**：在 1 到 623 維之間均等分布，適合大部分隨機性需求。
- **高效能**：相比於其他偽隨機數生成器，Mersenne Twister 在生成速度上具有優勢。

Mersenne Twister 是許多主流編程語言和軟體的默認偽隨機數生成器，如 Python、R、Ruby、Matlab 等，也是 C++11 中的標準偽隨機數生成器。

### 為什麼使用 `random.sample` 確保公平性？
- `random.sample` 的選取過程保證每個參與者在每次抽獎中被選中的機率相等，不受任何外部條件影響。
- 該方法不會產生重複的數字，因此即使多次抽獎，也不會出現同一輪抽中同一參與者的情況。

### 如何解釋「隨機性」的公平性？
- **均勻分佈**：每位參與者的選取概率是均勻的，無任何偏向。
- **獨立事件**：每次抽獎的結果都是獨立的，不受上一輪結果的影響。
- **高效能測試**：Mersenne Twister 演算法在多種測試（如 Diehard 測試套件）中證明其隨機性足夠應用於絕大多數非密碼學用途。

### 使用者信心保障
- **來源可信**：Python 是一個廣受社群支持並經過實際驗證的開發環境，`random.sample` 作為其核心函數之一，具有極高的可信度。
- **透明邏輯**：程式的隨機數邏輯公開在程式碼中，使用者可以輕鬆檢視，確認無任何刻意設置的不公平因素。

透過這些設計，**Rontgen Roulette** 能夠提供公正、隨機的抽獎體驗，讓參與者感受到真實的隨機性與公平性。如果您仍有疑問，歡迎聯繫開發者進一步了解實作邏輯！

### 免責聲明

本程式的隨機抽獎結果是基於電腦隨機數生成方法，旨在提供一個公平且無偏的抽獎過程。然而，由於偽隨機數生成的特性，無法保證抽獎結果的完全不可預測性。本程式僅供娛樂用途，開發者不對使用本程式進行的任何活動結果負責。使用者應自行承擔使用本程式所帶來的所有風險和後果。




## 聯絡我們
如有任何問題，請聯繫：
- **開發者**：Rontgen, DongZhuWorks.
- **Email**: dongzhuworks@gmail.com
- **該程式碼的撰寫有GPT-4的參與**

